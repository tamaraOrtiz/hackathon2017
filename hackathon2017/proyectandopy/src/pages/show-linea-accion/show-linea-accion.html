
<ion-header>
  <ion-title class="app-title" col-12 >proyectandoPy</ion-title>
  <ion-navbar id="subnavbar">
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title class="app-subtitle">{{item.nombre}}</ion-title>
  </ion-navbar>


</ion-header>
<ion-content >
  <ion-fab *ngIf="!openbar" left bottom edge style="bottom: 10px;"  id="opensidebar" (click)="opensidebar()">
      <button ion-fab  menuToggle color=secondary> <!-- basic usage -->
      <i class="fa fa-filter" aria-hidden="true"></i></button>
    </ion-fab>

  <ion-grid class="principal-grid">
    <ion-row>

      <ion-col *ngIf="openbar" class="filter-sidebar"  id="filter-sidebar" col-sm-8 col-8 col-md-8  col-lg-2 col-xl-2>
        <div *ngIf="openbar"  left top style="bottom: 10px;" class="closesidebar" >
            <button  menuToggle color=secondary (click)="closesidebar()"> <!-- basic usage -->
            <i class="fa fa-times" aria-hidden="true"></i></button>
          </div>
        <div id="filter-sidebar-div">
          <button  ion-button item-end outline [ngClass]="(tabactive=='mapa' ? 'sidebarbutton active' : 'sidebarbutton')" (click)="changetab('mapa')">
            <i class="fa fa-map" aria-hidden="true"></i>
            Mapa de Calor
          </button>
          <button  ion-button item-end outline [ngClass]="(tabactive=='barra' ? 'sidebarbutton active' : 'sidebarbutton')" (click)="changetab('barra');">
            <i class="fa fa-bar-chart" aria-hidden="true"></i>
            Gráfico de Barra
          </button>
          <button  ion-button item-end right  outline class ='sidebarbutton ' style="margin-top:8px;"  (click)="changetab('general')">

            Información
          </button>
          <ion-list class="selec-header">
         <ion-item>
           <ion-label>Presupuesto: <p>{{appHelper.numberFormatter(item.cantidadFinanciera)}} Gs.</p></ion-label>

         </ion-item>
         <ion-item>
           <ion-label>Cantidad Programada de Beneficiarios: <p>{{appHelper.numberFormatter(item.cantidadProgramada)}}</p></ion-label>

         </ion-item>
         <ion-item>
           <ion-label>Cantidad Actual de Beneficiarios: <p>{{appHelper.numberFormatter(item.cantidadAvance)}}</p></ion-label>


         </ion-item>
         <ion-item>
           <ion-label>Unidad de Medida: <p>{{item.unidadMedida}}</p></ion-label>

         </ion-item>

       </ion-list>
       <ion-label class="metrica-label">{{count_view}} visita/s - {{count_download}} descarga/s</ion-label>
       <div>
         <ion-slides pager class="helpslide">

            <ion-slide >
              <p>Necesitas Ayuda?</p>
              <ion-toolbar class="tutorial-buttons">
                <ion-icon right class="right" name="ios-arrow-forward" color="default"  (click)="goToSlide()"></ion-icon>
              </ion-toolbar>
            </ion-slide>

            <ion-slide >
              <p>Aquí puedes ver la información de esta Institución</p>
              <ion-toolbar class="tutorial-buttons">
                <ion-icon right class="right" name="ios-arrow-forward" color="default"  (click)="goToSlide()"></ion-icon>
                <ion-icon left class="left" name="ios-arrow-back" color="default"  (click)="gobackSlide()"></ion-icon>
              </ion-toolbar>
            </ion-slide>
            <ion-slide >
              <p>Misión, Visión, Objetivos, entre otros. Si quieres ver mas acerca de esto puedes hacer click en el enlace que está a lado del titulo: “Informacion”.</p>
              <ion-toolbar class="tutorial-buttons">
                <ion-icon right class="right" name="ios-arrow-forward" color="default"  (click)="goToSlide()"></ion-icon>
                <ion-icon left class="left" name="ios-arrow-back" color="default"  (click)="gobackSlide()"></ion-icon>
              </ion-toolbar>
            </ion-slide>
            <ion-slide >
              <p>También puedes calificar cada sección de la Información, y comentar sobre la misma.</p>
              <ion-toolbar class="tutorial-buttons">
                <ion-icon right class="right" name="ios-arrow-forward" color="default"  (click)="goToSlide()"></ion-icon>
                <ion-icon left class="left" name="ios-arrow-back" color="default"  (click)="gobackSlide()"></ion-icon>
              </ion-toolbar>
            </ion-slide>

            <ion-slide >
              <p>En la sección de Líneas de Acción puedes ver las líneas de acción de esta Institución. Los colores indican el progreso de cada línea.</p>
              <ion-toolbar class="tutorial-buttons">
                <ion-icon right class="right" name="ios-arrow-forward" color="default"  (click)="goToSlide()"></ion-icon>
                <ion-icon left class="left" name="ios-arrow-back" color="default"  (click)="gobackSlide()"></ion-icon>
              </ion-toolbar>
            </ion-slide>
            <ion-slide >
              <p>Además puedes ver el presupuesto destinado para cada linea de accion.</p>
              <ion-toolbar class="tutorial-buttons">
                <ion-icon right class="right" name="ios-arrow-forward" color="default"  (click)="goToSlide()"></ion-icon>
                <ion-icon left class="left" name="ios-arrow-back" color="default"  (click)="gobackSlide()"></ion-icon>
              </ion-toolbar>
            </ion-slide>
            <ion-slide >
              <p>Y si haces click dentro de la línea de acción podrás ver mas sobre la misma.</p>
              <ion-toolbar class="tutorial-buttons">
                <ion-icon right class="right" name="ios-arrow-forward" color="default"  (click)="goToSlide()"></ion-icon>
                <ion-icon left class="left" name="ios-arrow-back" color="default"  (click)="gobackSlide()"></ion-icon>
              </ion-toolbar>
            </ion-slide>
            <ion-slide >
              <p>Esperamos haberte ayudado!</p>
              <ion-toolbar class="tutorial-buttons">
                <ion-icon left class="left" name="ios-arrow-back" color="default"  (click)="gobackSlide()"></ion-icon>
              </ion-toolbar>
            </ion-slide>

          </ion-slides>
       </div>
        </div>


      </ion-col>

      <ion-col *ngIf="tabactive=='mapa'" [ngClass]="(!openbar ? 'central-col' : 'normal-col')" col-sm-12 col-md-12 offset-lg-2 offset-xl-2 col-lg-10 col-xl-10>

        <ion-item class="item-grouper">Grafica
          <a class="leaflet-control-zoom-out title-button" (click)="appHelper.download('#map', [], [], 'lineasAccion', this.item.institucion+'_'+item.id, 'linea_de_Accion_show', 'mapa')">
            <i class="fa fa-download"></i>
          </a>
        </ion-item>

        <div id="map" style="height: 70vh;"></div>
      </ion-col>
      <ion-col *ngIf="tabactive=='barra'" [ngClass]="(!openbar ? 'central-col' : 'normal-col')" col-sm-12 col-md-12 offset-lg-2 offset-xl-2 col-lg-10 col-xl-10>

        <ion-item class="item-grouper">Grafica
          <a class="leaflet-control-zoom-out title-button" (click)="appHelper.download('#map')">
            <i class="fa fa-download"></i>
          </a>
        </ion-item>

      </ion-col>
      <ion-col [ngClass]="(!openbar ? 'central-col' : 'normal-col')" col-sm-12 col-md-12 offset-lg-2 offset-xl-2 col-lg-10 col-xl-10>

        <ion-item class="item-grouper">Grafica
        </ion-item>

        <ion-grid class="graph-canva">
          <ion-row class="graph-title" style="display: none;">
            <ion-col col-xs-12 col-sm-12 col-lg-9 style="text-align: center;">
              <h3>Beneficiarios por {{selectData}}</h3>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col col-xs-12 col-sm-12 col-lg-9>
              <div #graph style="display:table; margin: 0 auto; width: 100%"></div>
            </ion-col>
            <ion-col col-3 *ngIf="!smallScreen">
              <div class="pie-info leaflet-top leaflet-right">
                <div class="info leaflet-control selection-info">
                  <h4>{{selectedTitle}}</h4>
                  <b id="label">Seleccione un programa</b><br>
                  <p id="count"></p>
                  <p id="percentage"></p>
                  <div id="detail"></div>
                </div>
                <div id="pie-info-legend" class="info legend leaflet-control"></div>
              </div>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-col>

      <ion-col [ngClass]="(!openbar ? 'central-col footer_col footer_content' : 'normal-col footer_content')" col-sm-12 col-md-12 offset-lg-2 offset-xl-2 col-lg-10 col-xl-10>
        <ppy-footer></ppy-footer>
      </ion-col>
  </ion-row>

  </ion-grid>

</ion-content>
