
<ion-header>
  <ion-title class="app-title" col-12 >proyectandoPy</ion-title>
  <ion-navbar id="subnavbar">
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title class="app-subtitle">{{item.nombre}}</ion-title>
  </ion-navbar>


</ion-header>
<ion-content >
  <ion-fab *ngIf="!openbar" right bottom edge style="bottom: 10px;"  id="opensidebar" (click)="opensidebar()">
      <button ion-fab  menuToggle color=secondary> <!-- basic usage -->
      <i class="fa fa-filter" aria-hidden="true"></i></button>
    </ion-fab>

  <ion-grid class="principal-grid">
    <ion-row>

      <ion-col *ngIf="openbar" class="filter-sidebar"  id="filter-sidebar" col-sm-8 col-8 col-md-8  col-lg-2 col-xl-2>
        <div *ngIf="openbar"  left top style="bottom: 10px;" class="closesidebar" >
            <button  menuToggle color=secondary (click)="closesidebar()"> <!-- basic usage -->
            <i class="fa fa-times" aria-hidden="true"></i></button>
          </div>
        <div id="filter-sidebar-div">
          <button  ion-button item-end outline [ngClass]="(tabactive=='mapa' ? 'sidebarbutton active' : 'sidebarbutton')" (click)="changetab('mapa')">
            <i class="fa fa-map" aria-hidden="true"></i>
            Mapa de Calor
          </button>
          <button  ion-button item-end outline [ngClass]="(tabactive=='barra' ? 'sidebarbutton active' : 'sidebarbutton')" (click)="changetab('barra');">
            <i class="fa fa-bar-chart" aria-hidden="true"></i>
            Gráfico de Barra
          </button>
          <button  ion-button item-end right  outline class ='sidebarbutton ' style="margin-top:8px;"  (click)="changetab('general')">

            Información
          </button>
          <ion-list class="selec-header">
         <ion-item>
           <ion-label>Presupuesto: <p>{{appHelper.numberFormatter(item.cantidadFinanciera)}} Gs.</p></ion-label>

         </ion-item>
         <ion-item>
           <ion-label>Cantidad Programada de Beneficiarios: <p>{{appHelper.numberFormatter(item.cantidadProgramada)}}</p></ion-label>

         </ion-item>
         <ion-item>
           <ion-label>Cantidad Actual de Beneficiarios: <p>{{appHelper.numberFormatter(item.cantidadAvance)}}</p></ion-label>


         </ion-item>
         <ion-item>
           <ion-label>Unidad de Medida: <p>{{item.unidadMedida}}</p></ion-label>

         </ion-item>

       </ion-list>
       <ion-label class="metrica-label">{{count_view}} visita/s - {{count_download}} descarga/s</ion-label>
       <div>
         <ion-slides pager class="helpslide">

            <ion-slide >
              <p>Necesitas Ayuda?</p>
              <ion-toolbar class="tutorial-buttons">
                <ion-icon right class="right" name="ios-arrow-forward" color="default"  (click)="goToSlide()"></ion-icon>
              </ion-toolbar>
            </ion-slide>

            <ion-slide >
              <p>La Información de la línea de acción se divide en 2 secciones</p>
              <ion-toolbar class="tutorial-buttons">
                <ion-icon right class="right" name="ios-arrow-forward" color="default"  (click)="goToSlide()"></ion-icon>
                <ion-icon left class="left" name="ios-arrow-back" color="default"  (click)="gobackSlide()"></ion-icon>
              </ion-toolbar>
            </ion-slide>
            <ion-slide >
              <p>La primera muestra un mapa de calor. Este mapa tiene tres capas.</p>
              <ion-toolbar class="tutorial-buttons">
                <ion-icon right class="right" name="ios-arrow-forward" color="default"  (click)="goToSlide()"></ion-icon>
                <ion-icon left class="left" name="ios-arrow-back" color="default"  (click)="gobackSlide()"></ion-icon>
              </ion-toolbar>
            </ion-slide>
            <ion-slide >
              <p>La capa de Avance muestra la cantidad actual de beneficiarios por departamento. La intensidad del departamento depende de la cantidad de beneficiarios del mismo con relación a la mayor cantidad de beneficiarios de un departamento.</p>
              <ion-toolbar class="tutorial-buttons">
                <ion-icon right class="right" name="ios-arrow-forward" color="default"  (click)="goToSlide()"></ion-icon>
                <ion-icon left class="left" name="ios-arrow-back" color="default"  (click)="gobackSlide()"></ion-icon>
              </ion-toolbar>
            </ion-slide>

            <ion-slide >
              <p>La capa de Meta muestra la cantidad programada de beneficiarios por departamento. La intensidad del departamento depende de la cantidad programada de beneficiarios del mismo con relación a la mayor cantidad programada de beneficiarios de un departamento.</p>
              <ion-toolbar class="tutorial-buttons">
                <ion-icon right class="right" name="ios-arrow-forward" color="default"  (click)="goToSlide()"></ion-icon>
                <ion-icon left class="left" name="ios-arrow-back" color="default"  (click)="gobackSlide()"></ion-icon>
              </ion-toolbar>
            </ion-slide>
            <ion-slide >
              <p>La capa Meta vs Avance muestra el porcentaje de avance, teniendo en cuenta la cantidad programada.</p>
              <ion-toolbar class="tutorial-buttons">
                <ion-icon right class="right" name="ios-arrow-forward" color="default"  (click)="goToSlide()"></ion-icon>
                <ion-icon left class="left" name="ios-arrow-back" color="default"  (click)="gobackSlide()"></ion-icon>
              </ion-toolbar>
            </ion-slide>
            <ion-slide >
              <p>Además si la línea de acción es de Alcance Nacional, se mostrará una capa más que te permitirá ver el avance, la meta o la meta vs el avance a nivel país.</p>
              <ion-toolbar class="tutorial-buttons">
                <ion-icon right class="right" name="ios-arrow-forward" color="default"  (click)="goToSlide()"></ion-icon>
                <ion-icon left class="left" name="ios-arrow-back" color="default"  (click)="gobackSlide()"></ion-icon>
              </ion-toolbar>
            </ion-slide>
            <ion-slide >
              <p>En la segunda sección se muestran dos gráficos de barras.</p>
              <ion-toolbar class="tutorial-buttons">
                <ion-icon right class="right" name="ios-arrow-forward" color="default"  (click)="goToSlide()"></ion-icon>
                <ion-icon left class="left" name="ios-arrow-back" color="default"  (click)="gobackSlide()"></ion-icon>
              </ion-toolbar>
            </ion-slide>
            <ion-slide >
              <p>El primero muestra la meta y el avance agrupados por departamento y el segundo muestra la meta y avance agrupados por trimestre.</p>
              <ion-toolbar class="tutorial-buttons">
                <ion-icon right class="right" name="ios-arrow-forward" color="default"  (click)="goToSlide()"></ion-icon>
                <ion-icon left class="left" name="ios-arrow-back" color="default"  (click)="gobackSlide()"></ion-icon>
              </ion-toolbar>
            </ion-slide>
            <ion-slide >
              <p>También dentro de este menú puedes ver la cantidad actual de beneficiarios de la línea de acción, la cantidad programada, el presupuesto asignado y la unidad de medida de los beneficiarios.</p>
              <ion-toolbar class="tutorial-buttons">
                <ion-icon right class="right" name="ios-arrow-forward" color="default"  (click)="goToSlide()"></ion-icon>
                <ion-icon left class="left" name="ios-arrow-back" color="default"  (click)="gobackSlide()"></ion-icon>
              </ion-toolbar>
            </ion-slide>
            <ion-slide >
              <p>Esperamos haberte ayudado!</p>
              <ion-toolbar class="tutorial-buttons">
                <ion-icon left class="left" name="ios-arrow-back" color="default"  (click)="gobackSlide()"></ion-icon>
              </ion-toolbar>
            </ion-slide>

          </ion-slides>
       </div>
        </div>
      </ion-col>

      <ion-col *ngIf="tabactive=='mapa'" [ngClass]="(!openbar ? 'central-col' : 'normal-col')" col-sm-12 col-md-12 offset-lg-2 offset-xl-2 col-lg-10 col-xl-10>

        <ion-item class="item-grouper">Grafica
          <a class="leaflet-control-zoom-out title-button" (click)="appHelper.download('#map', [], [], 'lineasAccion', this.item.institucion+'_'+item.id, 'linea_de_Accion_show', 'mapa')">
            <i class="fa fa-download"></i>
          </a>
        </ion-item>
        <ion-grid>
          <ion-row>
            <ion-col col-xs-12 col-sm-12 col-lg-9>
              <div id="map" style="height: 70vh;"></div>
            </ion-col>
          </ion-row>  
        </ion-grid>
      </ion-col>
      <ion-col *ngIf="tabactive=='barra'" [ngClass]="(!openbar ? 'central-col' : 'normal-col')" col-sm-12 col-md-12 offset-lg-2 offset-xl-2 col-lg-10 col-xl-10>

        <ion-item class="item-grouper">Gráfico de Barras

        </ion-item>
        <ion-item class="subtitle-graph">Gráfico de barra por Departamento
          <a class="leaflet-control-zoom-out title-button" (click)="appHelper.download('.graph-canva', [], ['.graph-title'], 'lineasAccion', this.item.institucion+'_'+item.id, 'linea_de_Accion_show', 'barra')">
            <i class="fa fa-download"></i>
          </a>
        </ion-item>
        <ion-grid class="graph-canva">
          <ion-row class="graph-title" style="display: none;">
            <ion-col col-xs-12 col-sm-12 col-lg-9 style="text-align: center;">
              <h3>{{item.nombre}}</h3>
              <h5>Metas y Avances</h5>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col col-xs-12 col-sm-12 col-lg-9>
              <div id="graph" style="display:table; margin: 0 auto; width: 100%">
              </div>
            </ion-col>
            <ion-col col-3 *ngIf="!smallScreen">
              <div class="pie-info leaflet-top leaflet-right">
                <div id="pie-info-legend" class="info legend leaflet-control leaflet-center"></div>
              </div>
            </ion-col>
          </ion-row>
        </ion-grid>

        <ion-item class="subtitle-graph">Gráfico de barra Trimestral
          <a class="leaflet-control-zoom-out title-button" (click)="appHelper.download('.graph-canva-2', [], ['.graph-title-2'], 'lineasAccion', this.item.institucion+'_'+item.id, 'linea_de_Accion_show', 'barra')">
            <i class="fa fa-download"></i>
          </a>
        </ion-item>
        <ion-grid class="graph-canva graph-canva-2">
          <ion-row class="graph-title graph-title-2" style="display: none;">
            <ion-col col-xs-12 col-sm-12 col-lg-9 style="text-align: center;">
              <h3>{{item.nombre}}</h3>
              <h5>Metas trimestrales</h5>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col col-xs-12 col-sm-12 col-lg-9>
              <div id="graph2" style="display:table; margin: 0 10px auto; width: 100%">
              </div>
            </ion-col>
            <ion-col col-xs-12 col-sm-12 *ngIf="!smallScreen">
              <div class="pie-info leaflet-top leaflet-right">
                <div id="pie-info-legend2" class="info legend leaflet-control leaflet-center"></div>
              </div>
            </ion-col>
          </ion-row>
        </ion-grid>

      </ion-col>

      <ion-col [ngClass]="(!openbar ? 'central-col footer_col footer_content' : 'normal-col footer_content')" col-sm-12 col-md-12 offset-lg-2 offset-xl-2 col-lg-10 col-xl-10>
        <ppy-footer></ppy-footer>
      </ion-col>
  </ion-row>

  </ion-grid>

</ion-content>
