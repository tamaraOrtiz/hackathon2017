<ion-header>
  <ion-title class="app-title" col-12 >proyectandoPy</ion-title>

  <ion-navbar  #content id="subnavbar" *ngIf="!showSearchBar">
    <ion-title class="app-subtitle"><ion-label> Instituciones </ion-label>
      <button ion-button clear (click)="showSearch(true)"><ion-icon name="search"></ion-icon></button>
    </ion-title>
  </ion-navbar>
  <ion-searchbar *ngIf="showSearchBar" [showCancelButton]=true [animated]=true (ionInput)="filter($event, true)" placeholder="Buscar" (ionCancel)="showSearch(false)">
  </ion-searchbar>
</ion-header>



<ion-content  class="common-list">

  <ion-fab *ngIf="!openbar" left bottom edge style="bottom: 10px;"  id="opensidebar" (click)="opensidebar()">
      <button ion-fab  menuToggle color=secondary> <!-- basic usage -->
      <i class="fa fa-filter" aria-hidden="true"></i></button>
    </ion-fab>

  <ion-grid>
    <ion-row>
      <ion-col *ngIf="openbar" class="filter-sidebar"  id="filter-sidebar" col-sm-8 col-8 col-md-8  col-lg-2 col-xl-2>
        <div *ngIf="openbar"  left top style="bottom: 10px;" class="closesidebar" >
            <button  menuToggle color=secondary (click)="closesidebar()"> <!-- basic usage -->
            <i class="fa fa-times" aria-hidden="true"></i></button>
          </div>
        <div id="filter-sidebar-div">
          <ion-list class="selec-header">
         <ion-item>
           <ion-label>Niveles</ion-label>
           <ion-select [(ngModel)]="selectedNiveles" multiple="true" cancelText="Cancelar" okText="Filtrar" (ionChange)="filter($event, false)">
             <ion-option  *ngFor="let nivel of niveles | keys"  value="{{niveles[nivel].id}}" selected="selectedNiveles.contains(nivel)">{{niveles[nivel].nombre}}</ion-option>

           </ion-select>
         </ion-item>

       </ion-list>
        </div>
        <div class="chips-div">
          <ion-chip *ngFor="let nivel of selectedNiveles"  #chip>
             <ion-label >{{niveles[nivel].nombre}}</ion-label>
             <button ion-button clear color=clear (click)="delete(chip, nivel)">
               <ion-icon name="close-circle"></ion-icon>
             </button>
           </ion-chip>
        </div>
        <div>
          <ion-slides pager class="helpslide">

             <ion-slide >
               <p>Necesitas Ayuda?</p>
               <ion-toolbar class="tutorial-buttons">
                 <button ion-button color="secondary"  (click)="goToSlide()"> Si</button>
               </ion-toolbar>
             </ion-slide>

             <ion-slide >
               <p>Aqui puedes ver el listado de las Intituciones, agrupadas por niveles y entidades (si quieres saber mas sobre esto puedes ir a la seccion de información)</p>
               <ion-toolbar class="tutorial-buttons">
                 <button ion-button color="secondary"  (click)="goToSlide()"> Siguente</button>
               </ion-toolbar>
             </ion-slide>

             <ion-slide >
               <p>Tambien puedes filtrar la informacion dentro de este menu</p>
               <ion-toolbar class="tutorial-buttons">
                 <button ion-button color="secondary"  (click)="goToSlide()"> Siguente</button>
               </ion-toolbar>
             </ion-slide>

             <ion-slide >
               <p>Dentro de cada Institucion puedes ver mas acerca de cada una, Visión, Misión, Lineas de Acción, entre Otros. Tambien puedes comentar y calificar esta Información</p>
               <ion-toolbar class="tutorial-buttons">
                 <button ion-button color="secondary"  (click)="goToSlide()"> Siguente</button>
               </ion-toolbar>
             </ion-slide>
             <ion-slide >
               <p>Dentro de cada Entidad puedes ver un grafico que muestra la cantidad de beneficiarios de cada programa</p>
               <ion-toolbar class="tutorial-buttons">
                 <button ion-button color="secondary"  (click)="goToSlide()"> Siguente</button>
               </ion-toolbar>
             </ion-slide>
             <ion-slide >
               <p>Esperamos haberte ayudado!</p>
               
             </ion-slide>

           </ion-slides>
        </div>
      </ion-col>
      <ion-col [ngClass]="(!openbar ? 'central-col' : 'normal-col')" col-sm-12 col-md-12 offset-lg-2 offset-xl-2 col-lg-10 col-xl-10>

        <ion-list class='view-content'>
          <div *ngFor="let nivel of groupedItems">
            <ion-item class="item-grouper">Nivel: {{nivel.name}}</ion-item>
            <div *ngFor="let entidad of nivel.entidades">
              <ion-item class="item-grouper middle-content entidad-grouper">Entidad: {{entidad.name}}
                <button ion-button clear (click)="itemTappedEst($event, entidad.items[0])"><i class="fa fa-pie-chart" aria-hidden="true"></i> </button>
              </ion-item>
              <button ion-item class="success" *ngFor="let item of entidad.items" (click)="itemTapped($event, item)">
                <ion-item>
                  <ion-avatar item-start>
                      <i class="fa fa-bank"></i>
                  </ion-avatar>
                  <div class="item-list">
                    <h2>{{item.nombre}}</h2>
                    <h5 ><ion-badge class="label_c1"><i class="fa fa-users" aria-hidden="true"></i>26000000000</ion-badge>
                    <ion-badge class="label_c2"><i class="fa fa-money" aria-hidden="true"></i>130</ion-badge>
                    <ion-badge class="label_c2"><i class="fa fa-line-chart" aria-hidden="true"></i>10</ion-badge></h5>
                  </div>
                  <ion-icon ios="ios-arrow-forward" md="ios-arrow-forward" class="right"></ion-icon>
                </ion-item>
              </button>
            </div>
          </div>
        </ion-list>
      </ion-col>
    </ion-row>

  </ion-grid>


</ion-content>
<ion-footer>
  <ion-toolbar>
    <ion-title>@Hackathon2017 - Senatics - STP</ion-title>
  </ion-toolbar>
</ion-footer>
